---
# Paths 
web_root: /var/www/htdocs
mirror_root: /var/www/htdocs/mirror

# rsync
# IPv4, safe-links, delete, resume via --partial --append-verify only (no partial-dir).
mirror_base_flags: "-4 -rltH --safe-links --delete --delete-after --partial --append-verify --timeout=600 --contimeout=15 --no-motd"

# Node.js mirror
nodejs_rsync_src: "rsync://unencrypted.nodejs.org/nodejs/release/"
nodejs_dest: "{{ mirror_root }}/node/dist"
nodejs_bwlimit: 0               # 0 = unlimited; set e.g. 20000 for ~20MB/s
nodejs_extra_opts: []           # e.g., ["--include='v*/'", "--exclude='*.pkg'"]
nodejs_cron_log: /var/log/rsync-nodejs.log

# Apache Solr mirror
solr_rsync_src: "rsync.apache.org::apache-dist/solr/"
solr_dest: "{{ mirror_root }}/apache/solr"
solr_bwlimit: 0
solr_extra_opts: []
solr_cron_log: /var/log/rsync-solr.log

# Cron (4x/day, not on the hour per Apache Software Foundation) 
cron_minute: "13"
cron_hours: "0,6,12,18"

# NGINX
nginx_service_name: nginx
nginx_conf_path: /etc/nginx/nginx.conf

nginx_root: "{{ web_root }}"
nginx_mirror_uri_prefix: /mirror/
nginx_server_name: pulmirror.princeton.edu
nginx_listen_ipv4: 80
nginx_listen_ipv6: true
nginx_gzip: true
nginx_server_tokens_off: true
nginx_keepalive_timeout: 65
nginx_worker_processes: "auto"
nginx_worker_rlimit_nofile: 1024
nginx_tls_port: 443
nginx_ssl_certificate: /etc/ssl/pulmirror_princeton_edu_chained.pem
nginx_ssl_certificate_key: /etc/ssl/private/pulmirror_princeton_edu_priv.key
nginx_ssl_session_timeout: 5m
nginx_ssl_session_cache: "shared:SSL:1m"
nginx_ssl_ciphers: >-
  ECDHE-ECDSA-AES256-GCM-SHA384:ECDHE-RSA-AES256-GCM-SHA384:
  ECDHE-ECDSA-CHACHA20-POLY1305:ECDHE-RSA-CHACHA20-POLY1305:
  ECDHE-ECDSA-AES128-GCM-SHA256:ECDHE-RSA-AES128-GCM-SHA256:
  ECDHE-ECDSA-AES256-SHA384:ECDHE-RSA-AES256-SHA384:
  ECDHE-ECDSA-AES128-SHA256:ECDHE-RSA-AES128-SHA256
nginx_ssl_prefer_server_ciphers: true
