---
- name: nginxplus | Install NGINX Open Source XSLT Module
  ansible.builtin.apt:
    name: nginx-module-xslt
    state: present
  when: nginx_type == "opensource"

- name: nginxplus | Install NGINX Plus XSLT Module
  ansible.builtin.apt:
    name: nginx-plus-module-xslt
    state: present
  when: nginx_type == "plus"

- name: nginxplus | Load NGINX XSLT Module
  ansible.builtin.lineinfile:
    path: /etc/nginx/nginx.conf
    insertbefore: BOF
    line: load_module modules/ngx_http_xslt_filter_module.so;
  notify: Reload NGINX
