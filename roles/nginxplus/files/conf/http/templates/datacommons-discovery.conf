# https://datacommons.princeton.edu/discovery should point to
# pdc-discovery-prod/discovery
location /discovery/ {
    proxy_pass http://pdc-discovery-prod/discovery/;
    proxy_set_header X-Forwarded-Host $host;
    proxy_set_header X-Real-IP $remote_addr;
    proxy_cache pdc-discovery-prodcache;
    # handle errors using errors.conf
    proxy_intercept_errors on;
    health_check uri=/discovery interval=10 fails=3 passes=2;
}