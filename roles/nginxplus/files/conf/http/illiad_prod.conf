# this file is ansible managed
server {
    listen 80;
    server_name lib-illiad.princeton.edu;
    rewrite ^/illiad/(.*)$ https://princeton.illiad.oclc.org/logon/$1 permanent;
        location / {
        rewrite ^illiad\/illiad.dll\/Openurl$ https://princeton.illiad.oclc.org/logon/$1 permanent;
    }
}

    server {
    listen 443 ssl;
    server_name lib-illiad.princeton.edu;

    rewrite ^/illiad/(.*)$ https://princeton.illiad.oclc.org/logon/$1 permanent;


    ssl_certificate            /etc/letsencrypt/live/lib-illiad/fullchain.pem;
    ssl_certificate_key        /etc/letsencrypt/live/lib-illiad/privkey.pem;
    ssl_session_cache          shared:SSL:1m;
    ssl_prefer_server_ciphers  on;

        location / {
        rewrite ^illiad\/illiad.dll\/Openurl$ https://princeton.illiad.oclc.org/logon/$1 permanent;
        }
    }
