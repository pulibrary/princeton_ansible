#!/usr/bin/env bash
# Managed by Ansible (roles/xrdp_gnome)

set -e

# XRDP sessions need dbus
if command -v dbus-launch >/dev/null 2>&1; then
  eval "$(dbus-launch --sh-syntax)"
fi

# Prefer Xorg session semantics
export XDG_SESSION_TYPE=x11
export GDK_BACKEND=x11

# Start GNOME session
exec {{ xrdp_gnome_session_command }}
