---
- name: Install grunt-cli
  npm: name=grunt-cli global=yes
  become: true

- name: install sass
  gem:
    name: sass
    state: latest
    user_install: 'no'

- name: Creates app directory
  file:
    path: '/opt/pas'
    state: 'directory'
    owner: 'pulsys'
    group: 'pulsys'
    mode: 0775
  become: true

- name: Install pas
  git:
    repo: 'git@github.com:pulibrary/pas.git'
    dest: '/opt/pas'
    accept_hostkey: 'yes'
    clone: 'yes'
    update: 'yes'
  become: 'pulsys'

- name: change permissions
  file:
    path: '/opt/pas'
    state: 'directory'
    recurse: 'yes'
    owner: '{{ deploy_user }}'
    group: 'www-data'
