---
- name: Converge
  hosts: all
  vars:
    - running_on_server: false
  become: true
  pre_tasks:
    - name: update cache
      apt:
        update_cache: true
        cache_valid_time: 600
  roles:
    - role: redis
    - role: nodejs
    - role: openjdk
    - role: imagemagick
    - role: rails_app
    - role: shared_data
    - role: sidekiq_worker
    - role: sneakers_worker
  tasks:
    - name: "Include dpul"
      ansible.builtin.include_role:
        name: dpul
