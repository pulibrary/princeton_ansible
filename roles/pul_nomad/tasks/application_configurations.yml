---
# This isn't my favorite, but we don't have a way to split these right now and
# not duplicate tasks.
# Maybe application configs should be a different playbook.
- name: "DPULC Staging"
  import_tasks: apps/dpul_c.yml
  vars:
    dpul_c_job_name: "{{ dpul_c_staging_job_name }}"
    dpul_c_db_name: "{{ dpul_c_staging_db_name }}"
    dpul_c_db_user: "{{ dpul_c_staging_db_user }}"
    dpul_c_db_password: "{{ dpul_c_staging_db_password }}"
    dpul_c_postgres_host: "{{ dpul_c_staging_postgres_host }}"
    dpul_c_postgres_version: "{{ dpul_c_staging_postgres_version }}"
    dpul_c_postgres_admin_user: "{{ dpul_c_staging_postgres_admin_user }}"
    dpul_c_figgy_db_host: "{{ dpul_c_staging_figgy_db_host }}"
    dpul_c_figgy_db_name: "{{ dpul_c_staging_figgy_db_name }}"
    dpul_c_figgy_db_password: "{{ dpul_c_staging_figgy_db_password }}"
    dpul_c_basic_auth_username: "{{ dpul_c_staging_basic_auth_username }}"
    dpul_c_basic_auth_password: "{{ dpul_c_staging_basic_auth_password }}"
    dpul_c_nomad_env_vars: "{{ dpul_c_staging_nomad_env_vars }}"
  tags:
    - dpulc
    - dpulc_staging

- name: "DPULC Production"
  import_tasks: apps/dpul_c.yml
  vars:
    dpul_c_job_name: "{{ dpul_c_production_job_name }}"
    dpul_c_db_name: "{{ dpul_c_production_db_name }}"
    dpul_c_db_user: "{{ dpul_c_production_db_user }}"
    dpul_c_db_password: "{{ dpul_c_production_db_password }}"
    dpul_c_postgres_host: "{{ dpul_c_production_postgres_host }}"
    dpul_c_postgres_version: "{{ dpul_c_production_postgres_version }}"
    dpul_c_postgres_admin_user: "{{ dpul_c_production_postgres_admin_user }}"
    dpul_c_figgy_db_host: "{{ dpul_c_production_figgy_db_host }}"
    dpul_c_figgy_db_name: "{{ dpul_c_production_figgy_db_name }}"
    dpul_c_figgy_db_password: "{{ dpul_c_production_figgy_db_password }}"
    dpul_c_basic_auth_username: "{{ dpul_c_production_basic_auth_username }}"
    dpul_c_basic_auth_password: "{{ dpul_c_production_basic_auth_password }}"
    dpul_c_nomad_env_vars: "{{ dpul_c_production_nomad_env_vars }}"
  tags:
    - dpulc
    - dpulc_production

- import_tasks: apps/imagecat_staging.yml
  tags: imagecat

- import_tasks: apps/imagecat_production.yml
  tags: imagecat

- import_tasks: apps/abid_staging.yml
  tags: abid

- import_tasks: apps/abid_production.yml
  tags: abid

- import_tasks: apps/logging.yml
  tags: logging

- import_tasks: apps/traefik_wall.yml
  tags: traefik_wall

- import_tasks: apps/circleci_deployer.yml
  tags: circleci_deployer
