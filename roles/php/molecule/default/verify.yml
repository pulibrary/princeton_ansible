---
# This is an example playbook to execute Ansible tests.

- name: Verify
  hosts: all
  gather_facts: false
  vars:
    - php_version: "8.1"
  tasks:
    - name: test for php packages
      ansible.builtin.apt:
        name: "{{ item }}"
        state: present
      loop:
        - php{{ php_version }}
        - php{{ php_version }}-dev
        - php{{ php_version }}-curl
        - php{{ php_version }}-zip
        - datadog-php-tracer
      check_mode: true
      register: present
      failed_when:
        - present is changed
