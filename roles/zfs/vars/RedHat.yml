---
# ZFS packages for RHEL-based systems (Rocky, AlmaLinux, RHEL)

# Determine major version
_os_version: "{{ ansible_distribution_major_version }}"

# ZFS repository configuration
zfs_repo_url: "https://zfsonlinux.org/epel/zfs-release-2-2{{ '.el' + _os_version }}.noarch.rpm"

zfs_packages:
  - zfs
  - zfs-dkms  # or kmod-zfs for pre-built modules

# Kernel development packages needed for DKMS
zfs_devel_packages:
  - kernel-devel
  - kernel-headers
  - gcc
  - make
  - elfutils-libelf-devel

# Module load service
zfs_services:
  - zfs-import-cache
  - zfs-import-scan
  - zfs-mount
  - zfs-share
  - zfs.target
