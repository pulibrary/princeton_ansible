---
# defaults file for roles/zfs
# load kernel module for (set false for containers in molecule)
zfs_load_module: true
zfs_safe_reload_module_on_arc_change: true
# Allow destructive pool operations when pool state=absent (DANGEROUS)
zfs_allow_pool_destroy: false

zfs_packages: []
zfs_devel_packages: []

# Pool configuration
zfs_pools: []
# Example:
# zfs_pools:
#   - name: tank
#     devices:
#       - /dev/sdb
#     properties:
#       ashift: 12
#       autoexpand: on
#     state: present

# Dataset configuration
zfs_datasets: []
# Example:
# zfs_datasets:
#   - name: tank/data
#     properties:
#       compression: lz4
#       atime: off
#       recordsize: 128k
#       mountpoint: /data
#     state: present
#   - name: tank/backups
#     properties:
#       compression: zstd
#       atime: off
#       mountpoint: /backups
#     state: present

# Default dataset properties
zfs_default_dataset_properties:
  compression: lz4
  atime: off
  relatime: on
  xattr: sa

# Snapshot configuration
zfs_snapshots: []
# Example:
# zfs_snapshots:
#   - name: tank/data@manual-2024-01-10
#     state: present

# Automatic scrub configuration
zfs_scrub_calendar: "monthly"  # systemd calendar expression

# Performance tuning (optional)
zfs_arc_max: ""  # e.g., "8G" - leave empty for auto
zfs_arc_min: ""  # e.g., "2G" - leave empty for auto

# Monitoring integration
zfs_monitoring_script_path: /usr/local/bin/check_zfs.sh
