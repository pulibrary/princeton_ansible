---
# tasks file for roles/ufw_firewall
- name: UFW | Install UFW
  ansible.builtin.package:
    name: ufw
    state: present

- name: UFW | disable UFW
  ansible.builtin.command: ufw disable
  changed_when: false

- name: UFW | generic rules template
  ansible.builtin.template:
    src: user.rules.j2
    dest: "/etc/ufw/user.rules"
    owner: root
    group: root
    mode: "0640"
  become: true
  become_user: root

- name: UFW | Reload UFW to apply changes
  ansible.builtin.command: ufw reload
  changed_when: false

- name: UFW | Enable and start UFW
  ansible.builtin.command: ufw enable
  changed_when: false
