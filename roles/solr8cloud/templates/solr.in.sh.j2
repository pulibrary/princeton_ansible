{{ ansible_managed | comment }}

# Memory settings
{% if solr_heap_setting is defined %}
SOLR_HEAP="{{ solr_heap_setting }}"
{% else %}
SOLR_HEAP="{{ solr_heap }}"
{% endif %}

# GC tune var
GC_TUNE="{{ solr_gc_tune }}"

# Directories / paths
SOLR_PID_DIR="/run/solr"
SOLR_HOME="{{ solr_data_dir }}"
SOLR_LOGS_DIR="{{ solr_log_dir }}"
SOLR_PORT="{{ solr_port }}"
SOLR_HOST="{{ solr_host }}"

# Mode / Networking
SOLR_MODE=solrcloud

# ZooKeeper
ZK_HOST="{{ solr_zookeeper_hosts_string }}"
ZK_CLIENT_TIMEOUT="{{ solr_zk_client_timeout | default('90000') }}"

# JMX
ENABLE_REMOTE_JMX_OPTS="true"
RMI_PORT="1099"

# All system properties on ONE line
SOLR_OPTS="-Xss256k -Dsolr.solr.home={{ solr_data_dir }} -Dsolr.log.dir={{ solr_log_dir }} -Dsolr.install.symDir={{ solr_installation }} -Dsolr.allowPaths={{ solr_data_dir }} -Dlog4j.configurationFile={{ solr_data_home }}/log4j2.xml -Dsolr.jetty.host=0.0.0.0 -Djetty.home={{ solr_installation }}/server -Dsolr.jetty.threads.idle.timeout=1800000 -Dsolr.cloud.client.stallTime=1800000 -Dlog4j2.formatMsgNoLookups=true -Djava.security.egd=file:/dev/./urandom -Dsolr.modules=analysis-extras,scripting -DzkClientTimeout=${ZK_CLIENT_TIMEOUT} -XX:+AlwaysPreTouch -XX:MaxGCPauseMillis=200"

# SSL (disabled here; enable if needed)
SOLR_SSL_ENABLED=false
