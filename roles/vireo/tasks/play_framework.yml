---
# play_framework file for roles/vireo
#
- name: vireo |  check if we already downloaded/unarchived
  stat:
    path: "/opt/play-1.3.x-1.3.0-37-g2ca9290"
  register: play_path

- name: vireo | download play framework
  unarchive:
    src: "https://github.com/TexasDigitalLibrary/play1/releases/download/play-1.3.x-1.3.0-37-g2ca9290/play-1.3.x-1.3.0-37-g2ca9290.zip"
    dest: "/opt"
    remote_src: true
  when: play_path.stat.exists == false

- name: vireo | create play symbolic link
  file:
    src: "/opt/play-1.3.x-1.3.0-37-g2ca9290"
    dest: "/opt/play"
    state: link

- name: vireo | set up the environment profile for play in /etc/profile.d
  template:
    src: play_env.j2
    dest: "/etc/profile.d/play.env.sh"
    mode: 0644
