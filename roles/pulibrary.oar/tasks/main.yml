---
# tasks file for roles/pulibrary.oar
- name: oar | install pyopenssl
  apt:
    name: ["python-openssl", "python3-openssl"]
    state: present
    update_cache: true

- name: Generate an OpenSSL Certificate Signing Request
  openssl_csr:
    path: /etc/ssl/csr/ssl-cert-snakeoil.csr
    privatekey_path: /etc/ssl/private/ssl-cert-snakeoil.key
    common_name: oar-staging.princeton.edu

- name: oar | create a Self Signed OpenSSL certificate
  openssl_certificate:
    path: /etc/ssl/certs/ssl-cert-snakeoil.pem
    privatekey_path: /etc/ssl/private/ssl-cert-snakeoil.key
    csr_path: /etc/ssl/csr/ssl-cert-snakeoil.csr
    provider: selfsigned
