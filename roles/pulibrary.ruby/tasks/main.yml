---
- name: install the dependencies
  apt:
    name: software-properties-common
    state: present
    update_cache: true

- name: add the Brightbox repository
  apt_repository:
    repo: 'ppa:brightbox/ruby-ng'
    state: present
    update_cache: true

- name: install Ruby 2.4.3
  apt:
    name: ["ruby2.4", "ruby2.4-dev", "ruby-switch"]
    state: present
    update_cache: true

- name: switch to Ruby 2.4.x release for the system default
  shell: ruby-switch --set ruby2.4

- gem:
    name: bundler
    user_install: false
