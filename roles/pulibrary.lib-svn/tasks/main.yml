---
- name: create svn home
  file:
    path: "{{ svn_home }}"
    state: directory
    owner: "{{ deploy_user }}"
    group: "{{ deploy_user }}"

- name: create svn logs home
  file:
    path: "/var/log/svnserve"
    state: directory
    owner: "{{ deploy_user }}"
    group: "{{ deploy_user }}"

- name: Check if repo exists in svn home
  stat:
    path: "{{ lib_svn_repo_dir }}"
  register: repo_dir

- name: create repo
  command: svnadmin create "{{ lib_svn_repo_dir }}"
  when: not repo_dir.stat.exists
  changed_when: false
