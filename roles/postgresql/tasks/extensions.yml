---
- name: PostgreSQL | Extensions | Make sure the postgres contrib extensions are installed
  ansible.builtin.apt:
    name: "postgresql-contrib-{{ postgres_version }}"
    state: present
    update_cache: true
  when:
    - postgres_ext_install_contrib
    - postgresql_is_local
  notify:
    - restart local postgres

- name: PostgreSQL | Extensions | Make sure the development headers are installed
  ansible.builtin.apt:
    name: libpq-dev
    state: present
    update_cache: true
  when:
    - postgres_ext_install_dev_headers
    - postgresql_is_local
  notify:
    - restart local postgres

- name: PostgreSQL | Extensions | Make sure the postgis extensions are installed
  ansible.builtin.apt:
    name: "{{ postgres_ext_postgis_deps }}"
    state: present
    update_cache: true
  when:
    - postgres_ext_install_postgis
    - postgresql_is_local
  notify:
    - restart local postgres
