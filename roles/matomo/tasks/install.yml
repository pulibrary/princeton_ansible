---
- name: matomo | ensure presence of matomo requirements
  apt:
    name: ["php7.4-xml", "php7.4-mbstring", "php7.4-gd"]
    state: present
    update_cache: true

- name: matomo | remove default html directory
  file:
    path: /var/www/html
    state: absent
  changed_when: false

- name: matomo | download and expand piwik
  unarchive:
    src: "https://builds.piwik.org/piwik.zip"
    dest: "/var/www"
    remote_src: true
    creates: "/var/www/piwik"
    owner: "www-data"
    group: "www-data"
