---
scenario:
  name: default
driver:
  name: docker
  env:
    ANSIBLE_CONFIG: "/absolute/path/to/roles/nfsserver/molecule/default/ansible.cfg"
    ANSIBLE_VAULT_IDENTITY_LIST: ""
    ANSIBLE_VAULT_PASSWORD_FILE: ""
    DOCKER_HOST: "unix:///var/run/docker.sock"
  command_timeout: 60
lint: |
  set -e
  yamllint .
  ansible-lint
platforms:
  - name: instance
    image: "ghcr.io/pulibrary/pul_containers:jammy_multi"
    command: "sleep infinity"
    volumes:
      - /sys/fs/cgroup:/sys/fs/cgroup:rw
    privileged: true
    pre_build_image: true
    connection_options:
      ansible_user: root
      ansible_connection: docker
provisioner:
  name: ansible
  log: true
  env:
    ANSIBLE_VAULT_IDENTITY_LIST: ""
    ANSIBLE_VAULT_PASSWORD_FILE: ""
    DOCKER_HOST: "unix:///var/run/docker.sock"
  playbooks:
    create: create.yml
    prepare: prepare.yml
  config_options:
    defaults:
      remote_tmp: /tmp/ansible
      vault_password_file: ""
verifier:
  name: ansible
