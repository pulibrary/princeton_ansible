---
scenario:
  name: default
driver:
  name: docker
lint: |
  set -e
  yamllint .
  ansible-lint
platforms:
  - name: instance
    image: "ghcr.io/pulibrary/pul_containers:jammy_multi"
    command: "/lib/systemd/systemd"
    volumes:
      - /sys/fs/cgroup:/sys/fs/cgroup:rw
    tmpfs:
      - /tmp
      - /run
      - /run/lock
    cgroupns_mode: host
    privileged: true
    pre_build_image: true
    env:
      DEBIAN_FRONTEND: noninteractive
      container: docker
provisioner:
  name: ansible
  config_options:
    defaults:
      remote_tmp: /tmp/ansible
      host_key_checking: false
      pipelining: true
      retry_files_enabled: false
    ssh_connection:
      timeout: 30
  log: true
  inventory:
    host_vars:
      instance:
        ansible_python_interpreter: /usr/bin/python3
verifier:
  name: ansible
