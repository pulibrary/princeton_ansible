---
- name:  Install apt-transport-https to support https APT downloads
  apt: name=apt-transport-https state=present

- name:  Add Elasticsearch repository key
  apt_key: url="{{ es_apt_key }}" state=present

- name:  Add elasticsearch repository
  apt_repository: repo={{ item.repo }} state={{ item.state}}
  with_items:
    - { repo: "{{ es_apt_url }}", state: "present" }

- name: install elasticsearch 
  apt: name=elasticsearch cache_valid_time=86400
