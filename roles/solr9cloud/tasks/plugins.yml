---
# Install the JAR plugins needed for our solr
- name: Solrcloud | Copy plugin jar files
  ansible.builtin.copy:
    src: files/{{ item }}
    dest: "{{ jardirectory }}/{{ item }}"
    mode: "0644"
  when:
    - running_on_server
  loop: "{{ plugin_jars }}"
  notify: Restart solr

# CDH solr configs expect certain JARs to be in the path:
# ${solr.install.dir:../../../..}/modules/analysis-extras/lib/
- name: Solrcloud | Copy analysis-extra jar files
  ansible.builtin.copy:
    src: files/{{ item }}
    dest: "{{ analysis_extra_jardirectory }}/{{ item }}"
    mode: "0644"
  when:
    - running_on_server
  loop: "{{ analysis_extras_jars }}"
  notify: Restart solr
