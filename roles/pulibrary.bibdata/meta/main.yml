---
galaxy_info:
  author: Princeton University Library
  description: Bibdata Role

  license: MIT

  min_ansible_version: 2.2

  platforms:
    - name: Ubuntu
      versions:
        - 16.04
        - 18.04

dependencies:
  - role: 'pulibrary.ruby'
  - role: 'pulibrary.deploy-user'
  - role: 'pulibrary.passenger'
  - role: 'pulibrary.redis'
  - role: 'pulibrary.postgresql'
    vars:
      postgresql_databases:
        - name: "{{ application_db_name }}"
      postgresql_users:
        - name: "{{ application_dbuser_name }}"
          password: "{{ application_dbuser_password }}"
        - name: "{{ application_dbuser_name }}"
          password: "{{ application_dbuser_password }}"
          db: "{{ application_db_name }}"
      postgresql_hba_entries:
        - type: local
          database: all
          user: postgres
          method: ident
        - type: host
          database: "{{ application_db_name }}"
          user: "{{ application_dbuser_name }}"
          address: 127.0.0.1/32
          method: md5
  - role: 'pulibrary.nodejs'
  - role: 'pulibrary.rails-app'
  - role: 'pulibrary.oracle.client'
  - role: 'pulibrary.sidekiq_worker'
  - role: 'pulibrary.samba'
