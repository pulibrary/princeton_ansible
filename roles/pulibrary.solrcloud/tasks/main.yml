---
- name: update host file
  lineinfile:
    dest: /etc/hosts
    regexp: '{{ item.address }}.*{{ item.hostname }}$'
    line: '{{ item.address }} {{ item.hostname }}'
    state: present
  become: yes
  loop:
    - { hostname: 'lib-zk1.princeton.edu', address: "{{ lib_zk1_host }}" }
    - { hostname: 'lib-zk2.princeton.edu', address: "{{ lib_zk2_host }}" }
    - { hostname: 'lib-zk3.princeton.edu', address: "{{ lib_zk3_host }}" }

- name: solr cloud install node
  include: install.yml
  tags:
    - install

- name: configure solr cloud
  include: config.yml
  tags:
    - configure

- name: run solr service
  include: service.yml
  tags:
    - service
