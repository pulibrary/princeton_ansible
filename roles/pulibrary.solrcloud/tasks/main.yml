---
- name: update host file
  lineinfile:
    dest: /etc/hosts
    regexp: '{{ item.address }}.*{{ item.hostname }}$'
    line: '{{ item.address }} {{ item.hostname }}'
    state: present
  become: yes
  loop:
    - { hostname: 'lib-solr1.princeton.edu', address: "{{ lib_solr1_ip }}" }
    - { hostname: 'lib-solr2.princeton.edu', address: "{{ lib_solr2_ip }}" }
    - { hostname: 'lib-solr3.princeton.edu', address: "{{ lib_solr3_ip }}" }

- name: solr cloud install node
  include: install.yml
  tags:
    - install

- name: configure solr cloud
  include: config.yml
  tags:
    - configure

- name: run solr service
  include: service.yml
  tags:
    - service
