{{ ansible_managed | comment }}
# roles/zookeeper/templates/zoo.cfg.j2

# Core timing
tickTime={{ zk_tick_time }}
initLimit={{ zk_init_limit }}
syncLimit={{ zk_sync_limit }}

# Data & logs
dataDir={{ zk_data_dir }}
dataLogDir={{ zk_log_dir }}

# Client port
clientPort={{ zk_client_port }}

# Health/4lw (3.5+ requires explicit whitelist)
4lw.commands.whitelist={{ zk_4lw_whitelist }}

# Autopurge (keeps snapshots/changelogs in check)
autopurge.snapRetainCount=10
autopurge.purgeInterval=24

# Session bounds (allow Solr's 60â€“90s client timeouts)
maxSessionTimeout={{ zk_max_session_timeout }}

# Extended node types (required for Solr 9 features like TTL/container nodes)
{% if zk_extended_types %}extendedTypesEnabled=true{% endif %}

# Quorum servers
{% for node in zk_nodes %}
server.{{ node.id }}={{ node.host }}:{{ zk_leader_port }}:{{ zk_election_port }}
{% endfor %}
