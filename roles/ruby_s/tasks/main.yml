---
- name: ruby | check version
  ansible.builtin.shell: ruby -v | awk "{print $2}"
  register: installed_ruby
  changed_when: false

- name: prints out the installed_ruby variable
  ansible.builtin.debug:
    var: installed_ruby

- include_tasks: cleanup.yml
  when:
    - installed_ruby.stdout | length > 0 and installed_ruby.stdout != desired_ruby_version

- include_tasks: install_from_source.yml
  when:
    - installed_ruby.stdout | length > 0 and installed_ruby.stdout != desired_ruby_version

