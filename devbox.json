{
  "$schema": "https://raw.githubusercontent.com/jetpack-io/devbox/main/.schema/devbox.schema.json",
  "packages": [
    "python311",
    "python311Packages.pip",
    "python311Packages.virtualenv",
    "ruby_3_2",
    "nodejs_20",
    "awscli2",
    "lastpass-cli",
    "git"
  ],
  "env": {
    "PYTHON_VERSION": "3.11.1",
    "RUBY_VERSION": "3.2.0",
    "NODE_VERSION": "20",
    "ANSIBLE_VAULT_PASSWORD_FILE": "$DEVBOX_PROJECT_ROOT/.devbox/virtenv/ruby_3_2/bin/lastpass-ansible",
    "LPASS_AGENT_TIMEOUT": "32400",
    "PATH": "$DEVBOX_PROJECT_ROOT/.venv/bin:$PATH",
    "VIRTUAL_ENV": "$DEVBOX_PROJECT_ROOT/.venv"
  },
  "shell": {
    "init_hook": [
      "./bin/devbox-init"
    ],
    "scripts": {
      "setup": [
        "git config core.hooksPath .githooks",
        "echo 'Git hooks configured: .githooks'"
      ],
      "update-deps": [
        "./.venv/bin/python -m pip install --upgrade pip",
        "./.venv/bin/python -m pip install -r requirements.txt",
        "touch .venv/.requirements_installed"
      ],
      "clean": [
        "rm -rf .venv",
        "rm -rf .devbox"
      ],
      "test": [
        "ansible --version",
        "ansible-lint --version",
        "molecule --version"
      ],
      "env-info": [
        "echo 'ANSIBLE_VAULT_PASSWORD_FILE: '\"$ANSIBLE_VAULT_PASSWORD_FILE\"",
        "echo 'LPASS_AGENT_TIMEOUT: '\"$LPASS_AGENT_TIMEOUT\"' (9 hours)'",
        "echo 'LastPass CLI: '$(lpass --version)",
        "echo 'lastpass-ansible: '$(which lastpass-ansible)"
      ]
    }
  }
}
