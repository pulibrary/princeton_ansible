---
- name: Run just the common role, to install tools and common configuration
  hosts: all
  # hosts: staging:qa:production
  remote_user: pulsys
  become: true
  vars:
    running_on_server: true

  pre_tasks:
    - name: stop playbook if you didn't pass --limit
      fail:
        msg: "you must use -l or --limit"
      when: ansible_limit is not defined
      run_once: true

  roles:
    - role: roles/common
