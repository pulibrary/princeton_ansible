---
- name: testing our ruby removal
  hosts: bibdata-alma-worker-staging1.princeton.edu
  
  tasks:
  - name: check for apt-installed rubies
    ansible.builtin.package_facts:
      manager: apt
    register: all_packages

  - name: create list of ruby packages
    ansible.builtin.set_fact:
      ruby_packages: "{{ all_packages.ansible_facts.packages | selectattr() }}"

  - name: view package list
    ansible.builtin.debug:
      var: all_packages

  # - name: ruby | remove apt-installed ruby
  #   ansible.builtin.apt:
  #     name: "{{ item }}"
  #      state: absent
  #     update_cache: true
  #   with_items: what goes here?
