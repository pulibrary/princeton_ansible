---
- hosts: libwwwstage
  remote_user: pulsys
  become: true
  vars_files:
    - ../site_vars.yml
    - ../group_vars/mariadb.yml
    - ../group_vars/all/vars.yml
    - ../group_vars/all/vault.yml
    - ../group_vars/drupal/drupal.yml
    - ../group_vars/drupal/vault.yml
    - ../group_vars/libwww/libwww.yml
    - ../group_vars/libwww/vault.yml
  roles:
    # - role: ../roles/pulibrary.deploy-user
    # - role: ../roles/pulibrary.apache2
    - role: ../roles/pulibrary.php
    # - {role: ../roles/pulibrary.mariadb, when: db_host == 'localhost'}
    # - role: ../roles/pulibrary.composer
    # - role: ../roles/pulibrary.drush
    # - role: ../roles/pulibrary.nodejs
    # - role: ../roles/pulibrary.oracle.java8
    # - {role: ../roles/pulibrary.solr, when: db_host == 'localhost'}
    # - role: ../roles/pulibrary.redis
    # - role: ../roles/pulibrary.drupal
    # - role: ../roles/pulibrary.libwww

  # post_tasks:
    # - name: tell everyone on slack you ran an ansible playbook
    #   slack:
    #     token: "{{ vault_pul_slack_token }}"
    #     msg: "{{ inventory_hostname }} completed"
    #     channel: #server-alerts
