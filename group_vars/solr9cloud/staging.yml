---
java_version: 17
install_ruby_from_source: true
install_zookeeper_from_source: true
desired_ruby_version: "3.4.1"
ruby_version_override: "ruby-3.4.1"
solr_heap_setting: '20g'
jardirectory: "/opt/solr/lib"
# more granular option would be:
# solr_java_memory: '-Xms16g -Xmx20g'
# solr shards
solr_shard_socket_timeout: 120000
solr_shard_conn_timeout:   60000
solr_update_socket_timeout: 120000
solr_update_conn_timeout:   60000
solr_update_max_connections: 512
solr_update_max_per_host:    64
# solr version
solr_cloud_download_version: 9.9.0
solr_cloud_version: "{{ solr_version }}"
solr_version: "{{ solr_cloud_download_version }}"
solr_log4j_path: '/solr/log4j2.xml'
solr_znode: solr9
solr_nodes:
  - "lib-solr-staging1.princeton.edu"
  - "lib-solr-staging2.princeton.edu"
  - "lib-solr-staging3.princeton.edu"
solr_zookeeper_hosts:
  - "lib-zk-staging4.princeton.edu:2181"
  - "lib-zk-staging5.princeton.edu:2181"
  - "lib-zk-staging6.princeton.edu:2181"
cjkfoldingfilter: https://github.com/pulibrary/pul_solr/raw/master/solr8_jars/CJKFoldingFilter.jar

# gcsfuse logrotate
gcsfuse_directory: "/var/log/gcsfuse"

solr9_gcsfuse_logrotate_rules:
  - name: "gcsfuse"
    paths:
      - "{{ gcsfuse_directory }}/*.log"
    options:
      rotate: "{{ logrotate_global_defaults.rotate }}"
      maxsize: "{{ logrotate_global_defaults.maxsize }}"
      create_mode: "{{ logrotate_global_defaults.create_mode }}"
      create_owner: "deploy"
      create_group: "deploy"
      su_user: "{{ logrotate_global_defaults.su_user }}"
      su_group: "{{ logrotate_global_defaults.su_group }}"
      postrotate: |
        systemctl reload solr-gcsfuse.service 2>/dev/null || true
