---
relay_host: true
postfix_smtp_relay_host: "{{ proofpoint_host }}"
postfix_smtp_relay_username: "{{ proofpoint_username }}"
postfix_smtp_relay_password: "{{ proofpoint_password }}"
postfix_smtp_relay_port: "{{ proofpoint_port }}"
proofpoint_username: "{{ vault_proofpoint_staging_username }}"
proofpoint_password: "{{ vault_proofpoint_staging_password }}"
proofpoint_host: "{{ vault_proofpoint_host }}"
proofpoint_port: "587"
# Postfix OpenTelemetry Collector Configuration
signoz_is_server: false
signoz_otel_receivers:
  hostmetrics:
    collection_interval: 30s
    scrapers:
      cpu: {}
      load: {}
      memory: {}
      disk: {}
      network: {}
      process: {}
      filesystem: {}
  filelog/postfix:
    include:
      - "/var/log/mail.log"
    start_at: end
    operators:
      - type: add
        field: attributes.log_type
        value: "system"

signoz_otel_processors:
  resource:
    attributes:
      - key: host.name
        value: "{{ ansible_fqdn }}"
        action: upsert
      - key: service.name
        value: "postfix"
        action: upsert
      - key: service.version
        value: "staging"
        action: upsert
      - key: environment
        value: "staging"
        action: upsert
  batch:
    timeout: 10s
    send_batch_size: 1024

signoz_otel_exporters:
  otlp:
    endpoint: "http://sandbox-signoz1.lib.princeton.edu:4317"
    tls:
      insecure: true
  debug:
    verbosity: basic

signoz_otel_service_pipelines:
  metrics:
    receivers: [hostmetrics]
    processors: [resource, batch]
    exporters: [otlp, debug]
  logs:
    receivers: [filelog/postfix]
    processors: [resource, batch]
    exporters: [otlp, debug]

signoz_otel_service_extensions: []
