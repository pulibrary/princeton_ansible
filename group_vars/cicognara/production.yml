---
passenger_ruby: "/usr/bin/ruby2.6"
ruby_version_override: "ruby2.6"
postgresql_is_local: false
postgres_host: "lib-postgres-prod3.princeton.edu"
postgres_admin_user: "postgres"
postgres_admin_password: '{{ vault_postgres_admin_password }}'
postgres_version: 13
postgres_port: "5432"
pg_hba_contype: "host"
pg_hba_postgresql_user: "all"
pg_hba_postgresql_database: "all"
pg_hba_method: "md5"
pg_hba_source: "{{ ansible_host }}/32"
rails_app_symlinks: []
rails_app_env: "production"
application_host: '{{ passenger_server_name }}'
application_host_protocol: 'https'
application_dbuser_role_attr_flags: 'CREATEDB'
project_db_host: '{{ postgres_host }}'
rails_app_dependencies:
  - zlib1g-dev
  - libsqlite3-dev
  - nodejs
rails_app_vars:
redis__server_default_configuration:
  syslog-enabled: "{{ redis__server_syslog | bool }}"
  syslog-ident: "{{ redis__server_syslog_ident }}"
  syslog-facility: "{{ redis__server_syslog_facility }}"
  loglevel: "{{ redis__server_loglevel }}"
  bind: "{{ redis__server_bind }}"
  port: "{{ redis__server_port }}"
  save: "{{ redis__server_save }}"
  maxmemory: "{{ redis__server_maxmemory }}"
  maxmemory-policy: "{{ redis__server_maxmemory_policy }}"
  maxmemory-samples: "{{ redis__server_maxmemory_samples }}"
datadog_api_key: "{{ vault_datadog_key }}"
datadog_config:
  apm_enabled: "true"
  log_enabled: true
  process_config:
    enabled: "true"
  apm_config:
    analyzed_spans:
    filter_tags:
      reject: ["http.useragent:nginx/1.23.4 (health check)", "operation:heartbeat", "operation:job_fetch", "operation:scheduled_push", "operation:scheduled_poller_wait"]
datadog_checks:
  ruby:
    init_config:
    logs:
      - type: file
        source: ruby
  redisdb:
    init_config:
    instances:
      - host: 127.0.0.1
        port: 6379
        keys:
  tls:
    init_config:
    instances:
      - server: cicognara.org
        port: 443
