---
postgresql_version: "13"
db_clusteradmin_user: "postgres"
db_clusteradmin_password: "{{ vault_postgres_admin_password }}"
replication_user_password: "{{ vault_replicant_password }}"
postgresql_settings:
  - name: port
    value: 5432
  - name: listen_addresses
    value: "*"
postgresql_ext_install_postgis: true
postgresql_databases:
  - name: replicant
postgresql_users:
  - name: postgres
    password: "{{ vault_postgres_admin_password }}"
    db: "postgres"
    priv: "ALL"
    role_attr_flags: "SUPERUSER"
  - name: replicant
    password: "{{ vault_postgres_admin_password }}"
    db: "replicant"
    priv: "ALL"
    role_attr_flags: "SUPERUSER"
postgres_leader: "{{ leader_db_ip }}"
postgres_standby: "{{ standby_db_ip }}"
postgresql_is_local: true
postgresadmin: "postgres"
postgres_admin_password: '{{ vault_postgres_admin_password }}'
replication_user: "replicant"
replication_database: "replicant"
postgres_host: "{{ leader_db_ip }}"
postgres_port: 5432
postgres_admin_user: "{{ postgresadmin }}"

datadog_api_key: "{{ vault_datadog_key }}"
datadog_service_name: postgresql
datadog_environment: prod
datadog_config:
  log_enabled: true
  process_enabled: true
datadog_typed_checks:
  init_config:
  logs:
    - type: file
      path: /var/lib/postgresql/{{ postgresql_version }}/main/pg_log/*.csv
      service: database
      source: postgresql
      sourcecategory: postgresql_logs
      tags: "postgresql, env:prod, role:postgresql"
