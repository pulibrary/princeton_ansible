---
# Filesystem + ownership for nodemation volumes
nodemation_uid: 1000
nodemation_gid: 1000
nodemation_base: /srv/nomad/host_volumes
nodemation_dirs:
  - nodemation-sandbox-data
  - nodemation-sandbox-files
# Public host + timezone
nodemation_sandbox_public_hostname: "nodemation-sandbox.lib.princeton.edu"
nodemation_generic_timezone: "America/New_York"

# Secrets (store these in vault)
nodemation_encryption_key: "{{ vault_nodemation_encryption_key }}"
nodemation_basic_auth_password: "{ vault_nodemation_basic_auth_password }}"
nodemation_jwt_secret: "{{ vault_nodemation_jwt_secret }}"

# Env pushed into Nomad (e.g., into nomad vars or rendered env file)
nodemation_sandbox_nomad_env_vars:
  N8N_HOST: "{{ nodemation_sandbox_public_hostname }}"
  N8N_PORT: "5678"
  N8N_PROTOCOL: "https"
  NODE_ENV: "production"
  WEBHOOK_URL: "https://{{ nodemation_sandbox_public_hostname }}/"
  GENERIC_TIMEZONE: "{{ nodemation_generic_timezone }}"

  # Hardening / security
  N8N_ENCRYPTION_KEY: "{{ vault_nodemation_encryption_key }}"
  N8N_JWT_SECRET: "{{ vault_nodemation_jwt_secret }}"
  N8N_SECURE_COOKIE: "true"
  N8N_DIAGNOSTICS_DISABLED: "true"
  N8N_PERSONALIZATION_ENABLED: "false"

  # Optional basic auth in front of the editor UI
  N8N_BASIC_AUTH_ACTIVE: "true"
  N8N_BASIC_AUTH_USER: "admin"
  N8N_BASIC_AUTH_PASSWORD: "{{ vault_nodemation_basic_auth_password }}"
